<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta charset="utf-8" />
		<link rel="stylesheet" href="globals.css" />
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div class="flatened">
			<div class="overlap-wrapper">
				<div class="overlap">
					<div class="overlap-group">
						<img class="USA-map" src="img/USA_map-1.png" />
						<div class="market" id="market-images">
  							<img class="market-image-1" data-index="0" src="img/Market assets/market-orange-train-car-card.png" />
  							<img class="market-image-2" data-index="1" src="img/Market assets/market-yellow-train-car-card.png" />
  							<img class="market-image-3" data-index="2" src="img/Market assets/market-blue-train-car-card.png" />
  							<img class="market-image-4" data-index="3" src="img/Market assets/market-red-train-car-card.png" />
  							<img class="market-image-5" data-index="4" src="img/Market assets/market-locomotive.png" />
  							<img class="market-deck" src="img/Market assets/market-hidden-train-car-card.png" />
  							<img class="market-destination-ticket" src="img/Market assets/market-hidden-destination-ticket.png" />
						</div>
						<div class="right-player" id="right-player">
							<div class="right-red-card-count" data-index="red" data-count=0>#</div>
							<div class="right-blue-card" data-index="blue" data-count=0>0</div>
							<div class="right-yellow-card" data-index="yellow" data-count=0>9</div>
							<div class="right-orange-card" data-index="orange" data-count=0>8</div>
							<div class="right-green-card" data-index="green" data-count=0>7</div>
							<div class="right-pink-card" data-index="pink" data-count=0>6</div>
							<div class="right-white-card" data-index="white" data-count=0>5</div>
							<div class="right-black-card" data-index="black" data-count=0>4</div>
							<div class="right-locomotives" data-index="locomotive" data-count=0>3</div>
							<div class="right-secret-cards" data-index="secret" data-count=0>2</div>
							<div class="right-destination" data-index="destination" data-count=0>1</div>
							<div class="div">
								<img class="right-black-train" src="img/right-black-train-car-card.png" />
								<img class="right-white-train" src="img/right-white-train-car-card.png" />
								<img class="right-purple-train" src="img/right-purple-train-car-card.png" />
								<img class="right-green-train" src="img/right-green-train-car-card.png" />
								<img class="right-orange-train" src="img/right-orange-train-car-card.png" />
								<img class="right-yellow-train" src="img/right-yellow-train-car-card.png" />
								<img class="right-blue-train-car" src="img/right-blue-train-car-card.png" />
								<img class="right-red-train-car" src="img/right-red-train-car-card.png" />
								<img class="right-locomotive" src="img/right-locomotive.png" />
								<img class="right-hidden-train" src="img/right-hidden-train-car-card.png" />
								<img class="right-hidden" src="img/right-hidden-destination-ticket.png" />
							</div>
						</div>
						<div class="left-player" id="left-player">
							<div class="left-red-card-count" data-index="red" data-count=0>1</div>
							<div class="left-blue-card-count" data-index="blue" data-count=0>2</div>
							<div class="left-yellow-card" data-index="yellow" data-count=0>3</div>
							<div class="left-orange-card" data-index="orange" data-count=0>4</div>
							<div class="left-green-card" data-index="green" data-count=0>5</div>
							<div class="left-pink-card-count" data-index="pink" data-count=0>6</div>
							<div class="left-white-card" data-index="white" data-count=0>7</div>
							<div class="left-black-card" data-index="black" data-count=0>8</div>
							<div class="left-locomotives" data-index="locomotive" data-count=0>9</div>
							<div class="left-secret-cards" data-index="secret" data-count=0>0</div>
							<div class="left-destination" data-index="destination" data-count=0>#</div>
							<img class="left-black-train-car" src="img/left-black-train-car-card.png" />
							<img class="left-white-train-car" src="img/left-white-train-car-card.png" />
							<img class="left-purple-train" src="img/left-purple-train-car-card.png" />
							<img class="left-green-train-car" src="img/left-green-train-car-card.png" />
							<img class="left-orange-train" src="img/left-orange-train-car-card.png" />
							<img class="left-yellow-train" src="img/left-yellow-train-car-card.png" />
							<img class="left-blue-train-car" src="img/left-blue-train-car-card.png" />
							<img class="left-red-train-car" src="img/left-red-train-car-card.png" />
							<img class="left-locomotive" src="img/left-locomotive.png" />
							<img class="left-hidden-train" src="img/left-hidden-train-car-card.png" />
							<img class="left-hidden" src="img/left-hidden-destination-ticket.png" />
						</div>
						<div class="sidebar" id="sidebar">
							<div class="overlap-2">
								<img class="sidebar-background" src="img/sidebar-background.png" />
								<div class="element-place-score">4</div>
								<div class="element-place-name-text">Placeholder name</div>
								<div class="element-rd-place-score">3</div>
								<div class="element-rd-place-name-text">Placeholder name</div>
								<div class="element-nd-place-score">2</div>
								<div class="element-nd-place-name-text">Placeholder name</div>
								<div class="element-st-place-score">1</div>
								<div class="element-st-place-name-text">Placeholder name</div>
								<div class="this-game-label">THIS GAME</div>
								<div class="score">4</div>
								<div class="label">Avg Score</div>
								<div class="name">Player 4</div>
								<div class="p-score">3</div>
								<div class="p-label">Avg Score</div>
								<div class="p-name">Player 3</div>
								<div class="text-wrapper">2</div>
								<div class="label-2">Avg Score</div>
								<div class="name-2">Player 2</div>
								<div class="score-2">1</div>
								<div class="label-3">Avg Score</div>
								<div class="name-3">Player 1</div>
								<div class="match-stats-label">MATCH&nbsp;&nbsp;STATS</div>  
                                <sgv class="score-background">
                                    <svg id="score-backgrounds" width="257" height="206" viewBox="0 0 257 206" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path place="1" d="M0 12C0 5.37258 5.37258 0 12 0H257V50H0V12Z" fill="#ffffff"/>
                                        <path place="2" d="M0 52H257V102H0V52Z" fill="#ffff00"/>
                                        <path place="3" d="M0 104H257V154H0V104Z" fill="#ff0000"/>
                                        <path place="4" d="M0 156H257V206H12C5.37258 206 0 200.627 0 194V156Z" fill="#f00000"/>
                                        </svg>
                                </svg>                             
							</div>
						</div>
						<div class="current-player" id="current-player">
							<div class="overlap-3">
								<img class="current-background" src="img/current-background.png" />
								<img class="current-name-card" src="img/current-name-card.png" />
								<img class="destination" src="img/destination-background.png" />
								<img class="train-counter-image" src="img/train-counter-image.png" />
								<img class="current-black-train" src="img/current-black-train-car-card.png" />
								<img class="current-white-train" src="img/current-white-train-car-card.png" />
								<img class="current-purple-train" src="img/current-purple-train-car-card.png" />
								<img class="current-green-train" src="img/current-green-train-car-card.png" />
								<img class="current-orange-train" src="img/current-orange-train-car-card.png" />
								<img class="current-yellow-train" src="img/current-yellow-train-car-card.png" />
								<img class="current-blue-train" src="img/current-blue-train-car-card.png" />
								<img class="current-red-train" src="img/current-red-train-car-card.png" />
								<img class="current-locomotive" src="img/current-locomotive.png" />
								<div class="current-locomotives" data-index="locomotive" data-count=0>9</div>
								<div class="current-black-card" data-index="black" data-count=0>8</div>
								<div class="current-white-card" data-index="white" data-count=0>7</div>
								<div class="current-pink-card" data-index="pink" data-count=0>6</div>
								<div class="current-green-card" data-index="green" data-count=0>5</div>
								<div class="current-orange-card" data-index="orange" data-count=0>4</div>
								<div class="current-yellow-card" data-index="yellow" data-count=0>3</div>
								<div class="current-blue-card" data-index="blue" data-count=0>2</div>
								<div class="current-red-card" data-index="red" data-count=0>1</div>
								<div class="ticket-city-b">MOSCO7</div>
								<div class="ticket-city-a">MOSCO8</div>
								<div class="ticket-score">4</div>
								<div class="ticket-city-b-2">MOSCO5</div>
								<div class="ticket-city-a-2">MOSCO6</div>
								<div class="ticket-score-2">3</div>
								<div class="ticket-city-b-3">MOSCO3</div>
								<div class="ticket-city-a-3">MOSCO4</div>
								<div class="ticket-score-3">2</div>
								<div class="ticket-city-b-4">MOSCO1</div>
								<div class="ticket-city-a-4">MOSCO2</div>
								<div class="ticket-score-4">1</div>
								<div class="name-text">Placeholder name</div>
								<div class="train-car-total">45</div>
								<div class="train-counter-label">Train Cars:</div>
							</div>
						</div>
                        <svg class="routes">
                            
                        </svg>
					</div>
					<div class="opposite-player" id="opposite-player">
						<div class="opposite-red-card" data-index="red" data-count=0>1</div>
						<div class="opposite-blue-card" data-index="blue" data-count=0>2</div>
						<div class="opposite-yellow-card" data-index="yellow" data-count=0>3</div>
						<div class="opposite-orange-card" data-index="orange" data-count=0>4</div>
						<div class="opposite-green-card" data-index="green" data-count=0>5</div>
						<div class="opposite-pink-card" data-index="pink" data-count=0>6</div>
						<div class="opposite-white-card" data-index="white" data-count=0>7</div>
						<div class="opposite-black-card" data-index="black" data-count=0>8</div>
						<div class="opposite-locomotives" data-index="locomotive" data-count=0>9</div>
						<div class="opposite-secret" data-index="secret" data-count=0>0</div>
						<div class="opposite-destination" data-index="destination" data-count=0>#</div>
						<img class="opposite-black-train" src="img/opposite-black-train-car-card.png" />
						<img class="opposite-white-train" src="img/opposite-white-train-car-card.png" />
						<img class="opposite-purple" src="img/opposite-purple-train-car-card.png" />
						<img class="opposite-green-train" src="img/opposite-green-train-car-card.png" />
						<img class="opposite-orange" src="img/opposite-orange-train-car-card.png" />
						<img class="opposite-yellow" src="img/opposite-yellow-train-car-card.png" />
						<img class="opposite-blue-train" src="img/opposite-blue-train-car-card.png" />
						<img class="opposite-red-train" src="img/opposite-red-train-car-card.png" />
						<img class="opposite-locomotive" src="img/opposite-locomotive.png" />
						<img class="opposite-hidden" src="img/opposite-hidden-train-car-card.png" />
						<img class="img" src="img/opposite-hidden-destination-ticket.png" />
					</div>
				</div>
			</div>
		</div>
		<script>
			const imageMap = {
			  	black: 'img/Market assets/market-black-train-car-card.png',
			  	blue: 'img/Market assets/market-blue-train-car-card.png',
				green: 'img/Market assets/market-green-train-car-card.png',
			  	locomotive: 'img/Market assets/market-locomotive.png',
				orange: 'img/Market assets/market-orange-train-car-card.png',
				purple: 'img/Market assets/market-purple-train-car-card.png',
				red: 'img/Market assets/market-red-train-car-card.png',
				white: 'img/Market assets/market-white-train-car-card.png',
			  	yellow: 'img/Market assets/market-yellow-train-car-card.png',
			};
			
			function updateImage(index, newImg) {
			  	const container = document.getElementById('market-images');
			  	const targetImg = container.querySelector(`img[data-index="${index}"]`);
				
			  	if (targetImg) {
			  	  targetImg.src = imageMap.newImg;
			  	} else {
			  	  console.warn(`No image found at data-index="${index}"`);
			  	}
			};

			function getCounts(playerID) {
				const container = document.getElementbyID(playerID);
				const counts = {};

				Object.keys(imageMap).forEach(color => {
					const el = container.querySelector(`div[data-index="${color}"]`);
					if (el) {
						counts[color] = parseInt(el.getAttribute('data-count')) || 0;
					}
				});

				return counts;
			};

			function setCounts(playerId, counts) {
				const container = document.getElementById(playerId);

				Object.entries(counts).forEach(([color, count]) => {
					const el = container.querySelector(`img[data-index="${color}"]`);
					if (el) {
						el.setAttribute('data-count', count);
					}
				});
			};
		
			//TODO Will need to change the core functionality of the next two funcions
			function updateCount(color, count) {
				
			};

			function rotateCount() {
				const currentCounts = getCounts('current-player');
				const leftCounts = getCounts('left-player');
				const oppositeCounts = getCounts('opposite-player');
				const rightCounts = getCounts('right-player');
			
				setCounts('left-player', currentCounts);
				setCounts('opposite-player', leftCounts);
				setCounts('right-player', oppositeCounts);
				setCounts('current-player', rightCounts);				
			};

			function setScoreColor(place,color) {
				const container = document.getElementById("score-backgrounds");
				const background = container.querySelector(`path[place="${place}"]`)
				
				background.setAttribute('fill', color)
			}
		</script>
	</body>
</html>
